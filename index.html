<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Conditional logic repeater</title>
</head>

<body>
	<h1>Conditional logic repeater demo</h1>

	<h2>Default repeater</h2>

	<conditional-logic-repeater class="demo-repeater" fields='[{"label":"Name","value":"name"},{"label":"E-mail","value":"email"},{"label":"Date of birth","value":"dob"}]'></conditional-logic-repeater>

	<button id="trigger">Get data</button>

	<h2>Toggleable repeater</h2>

	<conditional-logic-repeater toggleable fields='[{"label":"Name","value":"name"},{"label":"E-mail","value":"email"},{"label":"Date of birth","value":"dob"}]'></conditional-logic-repeater>

	<h2>Toggleable repeater with auto-clear</h2>

	<conditional-logic-repeater toggleable autoclear fields='[{"label":"Name","value":"name"},{"label":"E-mail","value":"email"},{"label":"Date of birth","value":"dob"}]'></conditional-logic-repeater>

	<h2>Repeater with default value set</h2>

	<conditional-logic-repeater value='{"enabled":true,"behavior":"show","logic":"and","conditions":[{"field":"email","comparison":"isnot","value":"test@email.com"}]}' fields='[{"label":"Name","value":"name"},{"label":"E-mail","value":"email"},{"label":"Date of birth","value":"dob"}]'></conditional-logic-repeater>

	<script type="module" src="/src/main.js"></script>

	<script>
		const button = document.querySelector('#trigger');
		const repeaterElement = document.querySelector('.demo-repeater');

		button.addEventListener('click', () => {

			if (repeaterElement.enabled) {
				console.log({
					enabled: repeaterElement.enabled,
					behavior: repeaterElement.behavior,
					logic: repeaterElement.logic,
					conditions: repeaterElement.conditions,
				});
			} else {
				console.log('Repeater is disabled');
			}
		});

		repeaterElement.addEventListener('es-conditional-logic-repeater-update', (e) => {
			console.log(e.detail);
			console.log(JSON.stringify(e.detail));
		});
	</script>

	<style>
		body {
			font-family: system-ui, sans-serif;
		}

		button {
			margin-top: 2rem;
		}

		h2 {
			margin-top: 2rem;
			font-weight: 500;
		}
	</style>
</body>

</html>
